name: "Read Then Update Flow"
description: "Test the complete flow of reading a memory then updating it"

conversation:
  # First, create a memory to work with
  - user: "Store this memory: 'Initial insight about debugging techniques'"
    expected_response:
      should_contain: ["stored"]
    expected_tools:
      - tool: "mcp__memory-bank__write-memory"
        parameters:
          content:
            should_contain: ["Initial insight", "debugging"]

  # Then search for it to populate the read cache
  - user: "Search for memories about debugging techniques"
    expected_response:
      should_contain: ["Retrieved", "debugging"]
    expected_tools:
      - tool: "mcp__memory-bank__read_in"
        parameters:
          query:
            should_contain: ["debugging"]

  # Now update should work since we've read it
  - user: "Update the debugging memory to say 'Refined insight about debugging techniques with additional context'"
    expected_response:
      should_contain: ["stored", "updated"]
    expected_tools:
      - tool: "mcp__memory-bank__write-memory"
        parameters:
          content:
            should_contain: ["Refined insight", "additional context"]